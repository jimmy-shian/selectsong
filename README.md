# SelectSong ‧ 歌曲選擇系統

> 一個以前端 `HTML / JavaScript` 為核心，並可與 Google Apps Script 整合的輕量化選歌工具。專案支援拖曳排序（含行動裝置觸控）、隨機選歌、本地設定持久化，以及 Google Sheet 雲端歌庫同步。

這是一個簡單的歌曲選擇系統，允許用戶搜索、選擇和排序歌曲。系統支持拖曳排序（包括手機觸控操作）、隨機選擇歌曲、本地存儲設置，以及與Google Sheet集成。

## 主要功能

1. **拖曳排序**：使用拖曳方式重新排序已選歌曲，支持手機觸控操作
2. **隨機選擇**：預設選擇10首歌曲，可自定義數量並保存設置
3. **本地存儲**：使用localStorage保存用戶設置和已選歌曲
4. **密碼保護**：管理功能需要密碼驗證（密碼：123）
5. **Google Sheet集成**：可以從Google Sheet讀取歌單數據
6. **多曲號處理**：支持同一首歌曲有多個曲號的情況
7. **歷史記錄**：保存和查看之前選擇的歌曲清單
8. **自適應界面**：手機模式下曲庫顯示3首，已選歌曲顯示8首

## 文件說明

- `index.html`：主要的網頁應用
- `gas_simulation.py`：模擬Google Apps Script功能的Python程序（用於本地測試）
- `google_apps_script.js`：部署到Google Apps Script的代碼

## 本地測試

### 1. 運行網頁應用

直接在瀏覽器中打開`index.html`文件即可使用基本功能。

### 2. 測試Google Sheet集成（使用Python模擬）

1. 確保已安裝Python 3.x
2. 運行Python模擬服務器：

```bash
python gas_simulation.py
```

3. 服務器將在 http://localhost:8080 啟動
4. 在網頁應用中，點擊「從Google Sheet載入歌單」按鈕將顯示提示信息

## 部署到Google Apps Script

1. 創建一個Google Sheet，包含四列：「歌號」、「歌名」、「語言」、「歌手」
2. 打開Google Apps Script編輯器（從Google Sheet菜單：擴展功能 > Apps Script）
3. 複製`google_apps_script.js`中的代碼到編輯器
4. 修改`SHEET_ID`變量為您的Google Sheet ID
5. 部署為網頁應用：
   - 點擊「部署」 > 「新增部署」
   - 選擇類型為「網頁應用程式」
   - 設置訪問權限（建議：「任何人」）
   - 點擊「部署」
6. 複製生成的URL
7. 在`index.html`中修改API URL為您的部署URL

## 使用說明

### 基本操作

- **搜索歌曲**：在搜索框中輸入歌名或歌號，點擊「搜尋」
- **隨機選擇**：點擊「隨機選擇」按鈕，輸入要選擇的歌曲數量
- **排序歌曲**：拖動已選歌曲前面的「☰」圖標重新排序
- **刪除歌曲**：點擊歌曲右側的「刪除」按鈕
- **保存當前選擇**：點擊「保存當前選擇」按鈕，將當前選擇的歌曲保存到歷史記錄
- **查看歷史記錄**：點擊「歷史記錄」按鈕，查看、載入或刪除之前保存的歌曲清單

### 管理功能

1. 點擊「管理歌曲」按鈕
2. 輸入密碼（123）並點擊「驗證密碼」
3. 驗證成功後可以：
   - 添加新歌曲：輸入歌號和歌名，點擊「新增」
   - 系統會檢查是否存在重複：
     - 如果歌號和歌名都相同，顯示「已存在」
     - 如果歌名相同但歌號不同，顯示確認提示，確認後「新增曲號成功」
     - 如果歌號相同但歌名不同，顯示確認提示，確認後「新增成功」
     - 如果歌號和歌名都是新的，直接「新增成功」